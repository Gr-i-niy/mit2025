# Управление маятниками в PyBullet

Проект содержит реализации систем управления для:
1. Однозвенного маятника (`pendulum.py`)
2. Двухзвенного маятника (`two-link/pendulum.py`)

## Особенности реализации
Для двухзвенного маятника реализовано:
- Плавная траектория перехода с использованием параметризации
- Управление через обратный якобиан
- **Важно**: Используется встроенная функция PyBullet `calculateJacobian` вместо аналитического вычисления

## Требования
- Python 3.7+
- Установленные зависимости:
```
pip install numpy matplotlib scipy pybullet
```

## Запуск
```bash
# Однозвенный маятник
python pendulum.py

# Двухзвенный маятник
cd two-link
python pendulum.py
```

##
Структура проекта
 -  pendulum.py - однозвенный маятник (PID/LQR управление)
 -  simple.urdf.xml - модель однозвенного маятника
 -  two-link/pendulum.py - двухзвенный маятник (управление через обратный якобиан)
 -  two-link.urdf.xml - модель двухзвенного маятника

## Объяснение ключевых изменений
1. **Вычисление якобиана**:
   - Используется `p.calculateJacobian` с параметрами:
     - `linkIndex=4` (конечное звено)
     - Локальная позиция `[0,0,0]` (центр масс)
     - Текущие углы суставов `[th1, th2]`
   - Результат содержит линейную и угловую части
   - Из линейной части берутся компоненты X и Z

2. **Получение позиции звена**:
   - Исправлен вызов `p.getLinkState` с параметром `computeForwardKinematics=1` для актуальной позиции

3. **Обработка результатов**:
   - Сформирована матрица 2x2 из компонентов X и Z
   - Сохранен порядок суставов (первый столбец - сустав 1, второй - сустав 3)

Данные изменения обеспечивают более точное и стабильное вычисление якобиана, используя встроенные возможности физического движка, что повышает достоверность моделирования.
